:footer_copyright: @christianposta
:imagesdir: images/
:speaker: Christian Posta
:speaker-title: Principal Middleware Architect
:speaker-email: christian@redhat.com
:speaker-blog: http://blog.christianposta.com
:speaker-twitter: http://twitter.com/christianposta[@christianposta]
:talk-speaker: {speaker}
:talk-name: KubeCon 2015: Microservices aren't just for unicorns!
:talk-date: 11/10/2015

[#cover,data-background-image="revealjs-redhat/image/1156524-bg_redhat.png" data-background-color="#cc0000"]
== {blank-space}

[#block,width="200px",left="70px",top="0px"]
image::{revealjs_cover_image}[]

[#cover-h1,width="600px",left="0px",top="200px"]
{talk-name}

[#cover-h4,width="800px",left="0px",top="525px"]
@christianposta +
{talk-date}

// ************** who - christian ********
[#who]
== Who

[.noredheader,cols="30,70"]
|===
| image:ceposta.png[width="90%",height="100%"]
| {speaker-title}

Blog: {speaker-blog}

Twitter: {speaker-twitter}

Email: {speaker-email} |
|===

* Committer on Apache ActiveMQ, Apache Camel, Fabric8
* Architect, technology evangelist, recovering consultant
* Spent a lot of time working with one of the largest Microservices, web-scale, unicorn companies
* Frequent blogger and speaker about open-source, integration, cloud, microservices

// ************** Agenda ********
[#agenda]
== Workshop Agenda

* Presentation: Microservices, OpenShift, Fabric8.io *[9a-10a]*
* Break/configure environments *[10a-10:30a]*
* Hands-on workshop *[10:30a-11:30a]*

// ************** transition page ************
[#microserviceshelpme, data-background-image="revealjs-redhat/image/1156524-bg_redhat.png" data-background-color="#cc0000"]
== {blank-space}

[#block,width="200px",left="70px",top="0px"]
image::{revealjs_cover_image}[]

[#cover-h1,width="600px",left="0px",top="400px"]
*Will Microservices Help me?*


// ************** Intro ********
[#cartoon-need-for-change]
== {blank-space}

[#block,width="200px",top="-25px",left="-25px"]
image:cartoon-need-for-change.jpg[width="80%",height="80%"]


// ************** Intro ********
[#complicated-complex]
== {blank-space}

[#block,width="200px",top="-25px",left="-25px"]
image:complexsimple.png[width="140%",height="140%"]


// ************** Intro ********
[#how-deal-complexity]
== {blank-space}

[#block,width="300px",top="250px",left="125px",font_size="50px"]
How do we deal with complexity?

// ************** Intro ********
[#goals-1]
== Increased interoperability

* Get more systems to share data
* Expose APIs
* More value from existing systems
* Expose for Mobile, Big Data, SaaS

// ************** Intro ********
[#goals-2]
== Increased vendor diversity options

* Pick best of breed technology
* Be able to consume new technology innovation
* Diversification when required
* Focus on standards and not proprietary interfaces

// ************** Intro ********
[#goals-3]
== Increased federation

* United while maintaining autonomoy
* Deployments of standardized, composable services
* Extra up front attention, investment at design time

// ************** Intro ********
[#goals-4]
== Increased business and technology alignment

* Hands on from domain experts
* Going from tactical applications to agile business applications
* Can adapt and change when the business does


// ************** Intro ********
[#goals-5]
== Increased ROI

* Additional up-front expense and effort
* Position as IT assets
* Reuse as the main goal

// ************** Intro ********
[#goals-6]
== Increased organization agility

* How an organization responds to change
* IT as the bottleneck
* Reuse, Reuse, Reuse
* Services as cogs in the machine
* Reassemble the cogs to produce differently operating machine


// ************** Intro ********
[#goals-all]
== Sounds very familiar... that was SOA

* Increased *interoperability*
* Increased *vendor diversity options*
* Increased *federation*
* Increased *business and technology alignment*
* Increased *ROI*
* Reduced *IT burden*
* Increased *organization agility*


[#block,width="200px",top="435px",left="220px"]
image:soa_middleware.png[width="110%",height="110%"]



// ************** Intro ********
[#going-about-it-wrong]
== {blank-space}


[#block,width="300px",top="150px",left="50px",font_size="50px"]
To deal with complexity, we need to build systems that are _flexible_ and _resilient_

[#block,width="300px",top="350px",left="50px",font_size="30px"]
*Except* we’re using *old premises* that fundamentally and intrinsically are *at odds with those goals*.



// ************** Intro ********
[#soa-middleware-reuse]
== Efficient, replaceable, reusable pieces

[#block,width="200px",top="120px",left="150px"]
image:softwarereuse.png[width="100%",height="100%"]


[#block,width="300px",top="500px",left="50px"]
Blindly following this model will lead practitioners to believe they are building flexible systems, when they’re doing the opposite!



// ************** Intro ********
[#flexibility-not-efficiency]
== {blank-space}


[#block,width="300px",top="150px",left="50px",font_size="50px"]
We need to build systems for *flexibility* and *resiliency*, not just *efficiency* and *robustness*


// ************** Intro ********
[#trainscars]
== {blank-space}

[#block,width="200px",top="55px",left="55px"]
image:trainscars.jpg[width="120%",height="120%"]


// ************** Intro ********
[#production-line]
== {blank-space}

[#block,width="200px",top="75px",left="75px"]
image:production-line.png[width="100%",height="100%"]


// ************** Intro ********
[#production-machine]
== {blank-space}

[#block,width="200px",top="75px",left="75px"]
image:machine.png[width="100%",height="100%"]


// ************** Intro ********
[#idiotproof]
== {blank-space}

[#block,width="200px",top="10px",left="75px"]
image:idiotproof.png[width="150%",height="150%"]

// ************** Intro ********
[#flexibility-not-efficiency2]
== {blank-space}


[#block,width="300px",top="150px",left="50px",font_size="50px"]
Optimizing for _efficiency_ reduces *flexibility* by definition



// ************** Intro ********
[#we-want-conways-law2]
== We want Conway's law

[#block,width="300px",top="150px",left="50px",font_size="40px"]
We want flexible systems *and organizations* that can *adapt* to their complex environments, make changes without rigid *dependencies* and coordination, can *learn*, *experiment*, and exhibit *emergent behavior*.

// ************** Intro ********
[#how-build-flexibility]
== {blank-space}

[#block,width="300px",top="150px",left="50px",font_size="50px"]
How do we build flexibility into the systems?


// ************** Intro ********
[#deps-deps-deps]
== {blank-space}

[#block,width="300px",top="150px",left="50px",font_size="50px"]
Dependencies, dependencies, dependencies!


[#block,width="300px",top="350px",left="50px",font_size="50px"]
(Oh.. and #systemsthinking)

// ************** transition page *************************************************************************************
[#microservicesFTW, data-background-image="revealjs-redhat/image/1156524-bg_redhat.png" data-background-color="#cc0000"]
== {blank-space}

[#block,width="200px",left="70px",top="0px"]
image::{revealjs_cover_image}[]

[#cover-h1,width="600px",left="0px",top="400px"]
*Microservices*

// ************** Microservices ********
[#what-are-microservices]
== What are microservices

* Single, self-contained, *autonomous*
* Easy(er) to understand individually
* Scalability
* Testing independently
* Individually deployed, has *own lifecycle*
* Single service going down *should not* impact other services
* Right technology stack for the problem (language, databases, etc)
* Fail fast
* Faster innovation, iteration


// ************** Microservices ********
[#microservices-different]
== Microservices design considerations

[#block,width="200px",top="150px",left="75px"]
image:trifecta.png[width="150%",height="150%"]



// ************** Microservices ********
[#microservices-org]
== Organization

* Autonomous, self-directed teams
* Transparency
* Small (2-pizza rule)
* Purpose, Trust, Empathy driven
* Feedback
* Experimentation
* Respond quickly to change
* Own services, delivery, operations
* Build it, you own it
* Use OpenSource as a model!!

[#block,width="200px",top="125px",left="550px"]
image:openorg.png[width="75%",height="75%"]


// ************** Microservices ********
[#microservices-domain]
== Domain Driven Design

* Establish domain language
* Understanding the links/relationships/dependencies between domain systems
* Developing a model
** conceptual
** implementation
** feedback loops
* Boundaries around models
* Abstractions, APIs, modularity

[#block,width="200px",top="200px",left="550px"]
image:ddd.jpg[width="125%",height="125%"]

// ************** Microservices ********
[#microservices-distributed]
== Distributed Systems

* The network is unreliable
* Design time coupling
* Unintended, run-time coupling
* Components will fail
* Design for resilience, not just robustness

[#block,width="200px",top="25px",left="550px"]
image:eip.jpg[width="125%",height="125%"]

// ************** Microservices ********
[#microservices-dep-thinking]
== Dependency Oriented Thinking at all levels

* What components depend on the others
* Which teams need to engage to make a change
* What services need to be changed if one changes
* Coordination, contention, synchronization, blocking
* Hidden dependencies

// ************** Microservices ********
[#microservices-challenges]
== Challenges adopting microservices

* Complexity
* Multiple databases, transactions
* When to use it?
* Organizational mismatch
* Network overhead
* Monitoring, logging, alerting
* Lack of tooling
* Just stick with monoliths?


// ************** transition page *************************************************************************************
[#bringtogether, data-background-image="revealjs-redhat/image/1156524-bg_redhat.png" data-background-color="#cc0000"]
== {blank-space}

[#block,width="200px",left="70px",top="0px"]
image::{revealjs_cover_image}[]

[#cover-h1,width="600px",left="0px",top="400px"]
*Bringing it all together*

// ************** bring together ********
[#opensource-principles]
== {blank-space}

[#block,width="300px",top="150px",left="50px",font_size="50px"]
Model culture after opensource organizations: *meritocracy*, *shared consciousness*, *transparency*, *network*, *platforms*


// ************** bring together ********
[#can-devops-help]
== Can DevOps help?

[#block,width="200px",top="100px",left="50px"]
image:flipoff.gif[width="190%",height="190%"]



// ************** bring together ********
[#thoughts-on-platforms]
== {blank-space}

[#block,width="300px",top="150px",left="50px",font_size="50px"]
Thoughts on platforms...



// ************** bring together ********
[#flexbility-v-efficiency]
== {blank-space}

[#block,width="300px",top="150px",left="50px",font_size="50px"]
Flexibility for teams and systems.

[#block,width="300px",top="300px",left="50px",font_size="50px"]
Efficiency for builds and delivery...


// ************** bring together ********
[#why-docker]
== Why Docker?

* Automation as communication
* Image format vs golden image
* Fusing of concerns (Devs/Ops)
* Density, infrastructure utilization

[#block,width="200px",top="100px",left="500px"]
image:docker.jpeg[width="120%",height="120%"]

// ************** bring together ********
[#why-kube]
== Why Kubernetes

* Different way to look at managing instances: scale
* Design for failure
* Efficient / Lean/ Simple
* Portability
* Extensible

[#block,width="200px",top="170px",left="500px"]
image:kubernetes-logo.png[width="120%",height="120%"]

// ************** bring together ********
[#all-we-need]
== {blank-space}

[#block,width="300px",top="150px",left="50px",font_size="50px"]
Is that all we need?

// ************** bring together ********
[#meet-openshift-1]
== Meet OpenShift v3

* Developer focused workflow
* Source 2 Image builds
* Build as first-class citizen
* Deployments as first-class citizen
* Software Defined Networking (SDN)
* Docker native format/packaging
* Run docker images
* CLI/Web based tooling

[#block,width="200px",top="170px",left="530px"]
image:openshift_logo.png[width="80%",height="80%"]


// ************** bring together ********
[#meet-openshift-2]
== Meet OpenShift v3

* Authentication
* LDAP
* groups/teams
* fine-grained access control
* container security
* templates
* edge routing

[#block,width="200px",top="170px",left="530px"]
image:openshift_logo.png[width="80%",height="80%"]


// ************** bring together ********
[#ose-arch]
== High-level architecture

[#block,width="200px",top="75px",left="0px"]
image:os3.png[width="100%",height="100%"]

// ************** bring together ********
[#microservices-platforms]
== A platform for microservices

* Service discovery
* Configuration
* Immutable infrastructure
* Build promotion, CI/CD
* API Management
* Logging, metrics
* Chaos monkey

[#block,width="200px",top="170px",left="480px"]
image:microservice.jpeg[width="130%",height="130%"]


// ************** bring together ********
[#about-redhat]
== Open Source at Red Hat

* Drive innovation in open-source communities
* Community leadership, meritocracy
* Products are curated open-source packages
* 100% everything from opensource
* Fixes go to "upstream" first
* Curate and harden innnovation and feed into products


// ************** bring together ********
[#meet-fabric8]
== Meet Fabric8.io

[#block,width="200px",top="100px",left="0px"]
image:fabric8.png[width="100%",height="100%"]


// ************** bring together ********
[#meet-fabric8-2]
== Meet Fabric8.io

* Visualizations of Kubernetes via Web Console
* Prepackaged "apps"
** 1-click Continuous Integration/Delivery
** 1-click API Management
** 1-click Metrics/Logging
* ChatOps
* Built-in Chaos Monkey



[#block,width="200px",top="450px",left="50px"]
image:fabric8-improvement.png[width="100%",height="100%"]


// ************** bring together ********
[#kube-for-java]
== Kubernetes for Java

* Java maven plugins
** Build/Manage docker images
** Sync w/ docker containers for RAD
** Generate Kube json/OpenShift templates
** Deploy to Kubernetes/OpenShift via maven goals
* Java+Kubernetes support for CDI/Spring
* JUnit+Kubernetes Integration testing



// ************** bring together ********
[#kube-for-java]
== Continuous Integration / Delivery

* Install the software "appliance" based on Jenkins, Gogs.io, Nexus, Gerrit, et al.
* Integrates with Slack/LetsChat/others
* Sets up git repos, code reviews, jenkins workflows
* Customizable
* Single pane of glass
* Build and environment promotions built in

[#block,width="200px",top="450px",left="50px"]
image:fabric8-automation.png[width="100%",height="100%"]



// ************** transition page *************************************************************************************
[#break-setup-tools, data-background-image="revealjs-redhat/image/1156524-bg_redhat.png" data-background-color="#cc0000"]
== {blank-space}

[#block,width="200px",left="70px",top="0px"]
image::{revealjs_cover_image}[]

[#cover-h1,width="600px",left="0px",top="400px"]
*Break / set up tools*



// ************** Set up ********
[#setup-oc]
== Set up client tooling

* OC
* Kubectl







// ************** transition page *************************************************************************************
[#hands-on-workshop, data-background-image="revealjs-redhat/image/1156524-bg_redhat.png" data-background-color="#cc0000"]
== {blank-space}

[#block,width="200px",left="70px",top="0px"]
image::{revealjs_cover_image}[]

[#cover-h1,width="600px",left="0px",top="400px"]
*Hands on Workshop*





// *********************************
[#questions]
== Questions

[.noredheader,cols="65,.<45"]
|===

.2+|image:questions.png[width="95%",height="95%"]
a|* Twitter : *{speaker-twitter}*
|===

